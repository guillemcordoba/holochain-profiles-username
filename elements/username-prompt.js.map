{"version":3,"file":"username-prompt.js","sourceRoot":"","sources":["../../src/elements/username-prompt.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,IAAI,EAAS,QAAQ,EAAE,MAAM,aAAa,CAAC;AAGrE,OAAO,yBAAyB,CAAC;AACjC,OAAO,iCAAiC,CAAC;AACzC,OAAO,sBAAsB,CAAC;AAC9B,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AAEpD,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;AAE/C,MAAM,OAAgB,cAAe,SAAQ,UAAU;IAAvD;QACE,wBAAwB;;QAKxB,yBAAyB;QAGzB,eAAU,GAAsB,SAAS,CAAC;IAgD5C,CAAC;IArCC,KAAK,CAAC,YAAY;QAChB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;YAC5C,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;IACnC,CAAC;IAED,mBAAmB;QACjB,OAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;IACrD,CAAC;IAED,WAAW,CAAC,CAAc;;QACxB,IAAI,CAAC,UAAU,GAAG;YAChB,EAAE,EAAE,MAAA,IAAI,CAAC,UAAU,0CAAE,EAAY;YACjC,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ;SAC5B,CAAC;IACJ,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAA;;;;QAIP,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;4BACc,IAAI,CAAC,WAAW;+BACb;YACvB,CAAC,CAAC,IAAI,CAAA,iDAAiD;WACpD,CAAC;IACV,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;QACP,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE;KACzE,CAAC;IACJ,CAAC;;AA7CM,qBAAM,GAAG;IACd,YAAY;IACZ,GAAG,CAAA;;;;KAIF;CACF,CAAC;AATF;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;kDACe","sourcesContent":["import { LitElement, css, html, query, property } from 'lit-element';\nimport { ApolloClient } from '@apollo/client/core';\n\nimport '@material/mwc-textfield';\nimport '@material/mwc-circular-progress';\nimport '@material/mwc-button';\nimport { GET_MY_PROFILE } from '../graphql/queries';\nimport { Agent } from '../types';\nimport { sharedStyles } from '../sharedStyles';\n\nexport abstract class UsernamePrompt extends LitElement {\n  /** Public attributes */\n\n  /** Dependencies */\n  abstract get _apolloClient(): ApolloClient<any>;\n\n  /** Private properties */\n\n  @property({ type: Object })\n  _myProfile: Agent | undefined = undefined;\n\n  static styles = [\n    sharedStyles,\n    css`\n      :host {\n        display: contents;\n      }\n    `,\n  ];\n\n  async firstUpdated() {\n    const result = await this._apolloClient.query({\n      query: GET_MY_PROFILE,\n    });\n\n    this._myProfile = result.data.me;\n  }\n\n  agentHasSetUsername() {\n    return this._myProfile && this._myProfile.username;\n  }\n\n  usernameSet(e: CustomEvent) {\n    this._myProfile = {\n      id: this._myProfile?.id as string,\n      username: e.detail.username,\n    };\n  }\n\n  renderPrompt() {\n    return html` <div\n      class=\"column\"\n      style=\"align-items: center; justify-content: center\"\n    >\n      ${this._myProfile\n        ? html`<hpu-set-username\n            @username-set=${this.usernameSet}\n          ></hpu-set-username>`\n        : html`<mwc-circular-progress></mwc-circular-progress>`}\n    </div>`;\n  }\n\n  render() {\n    return html`\n      ${this.agentHasSetUsername() ? html`<slot></slot>` : this.renderPrompt()}\n    `;\n  }\n}\n"]}